---
title: Configuration
description: Type-safe configuration with tsgonest.config.ts and defineConfig().
---

tsgonest supports both TypeScript and JSON configuration files. The **recommended** approach is `tsgonest.config.ts` with the `defineConfig()` helper for type safety and autocomplete.

## TypeScript config (recommended)

```ts title="tsgonest.config.ts"
import { defineConfig } from '@tsgonest/runtime';

export default defineConfig({
  controllers: {
    include: ['src/**/*.controller.ts'],
  },
  transforms: {
    validation: true,
    serialization: true,
  },
  openapi: {
    output: 'dist/openapi.json',
  },
});
```

The `defineConfig()` helper provides full IntelliSense — autocomplete, inline documentation, and type checking for every field.

## JSON config (alternative)

If you prefer JSON, create `tsgonest.config.json` in your project root:

```json title="tsgonest.config.json"
{
  "controllers": {
    "include": ["src/**/*.controller.ts"]
  },
  "transforms": {
    "validation": true,
    "serialization": true
  },
  "openapi": {
    "output": "dist/openapi.json"
  }
}
```

## Config resolution

tsgonest resolves configuration in this order:

1. `--config` CLI flag (explicit path)
2. `tsgonest.config.ts` in the working directory
3. `tsgonest.config.json` in the working directory
4. Default configuration (sensible defaults)

---

## Full configuration reference

```ts title="tsgonest.config.ts"
import { defineConfig } from '@tsgonest/runtime';

export default defineConfig({
  controllers: {
    include: ['src/**/*.controller.ts'],
    exclude: ['src/**/*.spec.ts'],
  },
  transforms: {
    validation: true,
    serialization: true,
  },
  openapi: {
    output: 'dist/openapi.json',
    title: 'My API',
    version: '1.0.0',
    description: 'My NestJS API documentation',
  },
});
```

For the full set of OpenAPI metadata fields (contact, license, servers, security schemes), NestJS settings (global prefix, versioning), and dev/build settings — see the field reference below.

---

## Field reference

### `controllers`

Controls which files are analyzed for NestJS controller routes (used for OpenAPI generation and route mapping).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `include` | `string[]` | `["src/**/*.controller.ts"]` | Glob patterns for controller files |
| `exclude` | `string[]` | `[]` | Glob patterns to exclude |

```ts title="tsgonest.config.ts"
import { defineConfig } from '@tsgonest/runtime';

export default defineConfig({
  controllers: {
    include: ['src/**/*.controller.ts'],
    exclude: ['src/**/*.spec.ts', 'src/**/health.controller.ts'],
  },
  // ...
});
```

### `transforms`

Controls companion file generation (validators and serializers).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `validation` | `boolean` | `true` | Generate `validate` and `assert` functions |
| `serialization` | `boolean` | `true` | Generate `serialize` functions |
| `include` | `string[]` | `[]` | Glob patterns for source files to generate companions for |
| `exclude` | `string[]` | `[]` | Type name patterns to exclude from codegen |

```ts title="tsgonest.config.ts"
import { defineConfig } from '@tsgonest/runtime';

export default defineConfig({
  transforms: {
    validation: true,
    serialization: true,
    include: ['src/**/*.dto.ts'],
    exclude: ['LegacyUserDto', 'Internal*'],
  },
  // ...
});
```

:::tip
The `exclude` field in `transforms` accepts **type name patterns** (not file paths). Use `*` as a wildcard. For example, `"Internal*"` skips any type whose name starts with "Internal".
:::

### `openapi`

Controls OpenAPI document generation.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `output` | `string` | `"dist/openapi.json"` | Output path for the OpenAPI document |
| `title` | `string` | `"API"` | API title in the info section |
| `version` | `string` | `"1.0.0"` | API version in the info section |
| `description` | `string` | `""` | API description |

For detailed OpenAPI metadata configuration (contact, license, servers, security schemes), see the [OpenAPI Config](/docs/openapi/config) page.

### `nestjs`

NestJS-specific settings that affect how routes are generated in the OpenAPI document.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `globalPrefix` | `string` | `""` | Global route prefix (e.g., `"api"`) |
| `versioning` | `object` | | API versioning configuration |

#### `nestjs.versioning`

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `type` | `string` | `"URI"` | Versioning strategy: `"URI"`, `"HEADER"`, `"MEDIA_TYPE"`, or `"CUSTOM"` |
| `defaultVersion` | `string` | | Default version (e.g., `"1"`) |
| `prefix` | `string` | `"v"` | Version prefix for URI versioning |

```ts title="tsgonest.config.ts"
import { defineConfig } from '@tsgonest/runtime';

export default defineConfig({
  // ...
  nestjs: {
    globalPrefix: 'api',
    versioning: {
      type: 'URI',
      defaultVersion: '1',
      prefix: 'v',
    },
  },
});
```

With this config, a `@Controller('users')` with a `@Get()` method produces the path `/api/v1/users` in the OpenAPI document. See the [Versioning](/docs/openapi/versioning) page for details.

### Dev/build settings

These fields mirror NestJS CLI conventions for easy migration:

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `entryFile` | `string` | `"main"` | Entry point filename without extension |
| `sourceRoot` | `string` | `"src"` | Source root directory for file watching |
| `deleteOutDir` | `boolean` | `false` | Delete the output directory before building (same as `--clean`) |
| `manualRestart` | `boolean` | `false` | Enable `rs` manual restart in dev mode |

---

## TsgonestConfig interface

The full TypeScript interface exported from `@tsgonest/runtime`:

```ts
interface TsgonestConfig {
  controllers?: {
    include?: string[];
    exclude?: string[];
  };
  transforms?: {
    validation?: boolean;
    serialization?: boolean;
    include?: string[];
    exclude?: string[];
  };
  openapi?: {
    output?: string;
    title?: string;
    version?: string;
    description?: string;
    contact?: OpenAPIContact;
    license?: OpenAPILicense;
    servers?: OpenAPIServer[];
    securitySchemes?: Record<string, OpenAPISecurityScheme>;
  };
  nestjs?: {
    globalPrefix?: string;
    versioning?: VersioningConfig;
  };
  entryFile?: string;
  sourceRoot?: string;
  deleteOutDir?: boolean;
  manualRestart?: boolean;
}
```

## TypeScript config evaluation

When loading a `.ts` config file, tsgonest evaluates it via Node.js with a fallback chain:

1. `node --import tsx` (if [tsx](https://tsx.is) is installed)
2. `node --experimental-strip-types` (Node.js 22.6+)

The config file must use `export default` with `defineConfig()`. If your Node.js version supports `--experimental-strip-types`, no additional tooling is needed.

---

## Validation rules

tsgonest validates your config file and reports errors for:

- `controllers.include` must contain at least one glob pattern
- `openapi.output` must not be empty
- `openapi.output` must have a `.json` extension

## Path resolution

- **Relative paths** in `openapi.output` are resolved relative to the config file's directory
- If `--config` is not set, tsgonest looks for `tsgonest.config.ts` first, then `tsgonest.config.json`
- If no config file exists and `--config` is not set, tsgonest uses sensible defaults

## Migration from nest-cli.json

If you're migrating from `nest-cli.json`, here's a mapping of common fields:

| nest-cli.json | tsgonest.config.ts | Notes |
| --- | --- | --- |
| `"entryFile": "main"` | `entryFile: 'main'` | Same field name |
| `"sourceRoot": "src"` | `sourceRoot: 'src'` | Same field name |
| `"compilerOptions.deleteOutDir"` | `deleteOutDir: true` | Top-level in tsgonest |
| `"compilerOptions.assets"` | `--assets` flag | CLI flag, not in config |
| N/A | `controllers` | New — for OpenAPI route analysis |
| N/A | `transforms` | New — for companion generation |
| N/A | `openapi` | New — replaces `@nestjs/swagger` config |
